import{_ as C,h as E,v as U,m as L,l as B,u as M,c as H,a as e,w as o,r as t,b as g,d as N,e as q,n as h,E as v,o as u,i as p,j as x,k as j}from"./index-BAzr2iUZ.js";const I={name:"RegisterPage",components:{User:M,Lock:B,Message:L,View:U,Hide:E},setup(){const _=q(),s=g(null),c=g(!1),r=g(!1),b=g(!1),k=(m,l,i)=>{l===""?i(new Error("请输入密码")):l.length<6?i(new Error("密码长度不能小于6位")):(a.confirmPassword!==""&&s.value.validateField("confirmPassword"),i())},w=(m,l,i)=>{l===""?i(new Error("请再次输入密码")):l!==a.password?i(new Error("两次输入密码不一致!")):i()},a=N({username:"",password:"",confirmPassword:"",email:""});return{registerForm:a,registerRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,message:"用户名长度不能小于3位",trigger:"blur"}],password:[{validator:k,trigger:"blur"}],confirmPassword:[{validator:w,trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}]},registerFormRef:s,loading:c,passwordVisible:r,confirmPasswordVisible:b,handleRegister:()=>{s.value.validate(async m=>{if(m){c.value=!0;try{const{username:l,password:i,email:y}=a;await h({username:l,password:i,email:y}),v.success("注册成功"),_.push("/login")}catch(l){console.error("注册失败:",l),v.error(l.message||"注册失败")}finally{c.value=!1}}})},toLogin:()=>{_.push("/login")}}}},T={class:"register-container"};function z(_,s,c,r,b,k){const w=t("User"),a=t("el-icon"),f=t("el-input"),d=t("el-form-item"),V=t("Lock"),m=t("View"),l=t("Hide"),i=t("Message"),y=t("el-button"),P=t("el-link"),F=t("el-form"),R=t("el-card");return u(),H("div",T,[e(R,{class:"register-card"},{header:o(()=>s[6]||(s[6]=[j("h3",{class:"register-title"},"注册账号",-1)])),default:o(()=>[e(F,{ref:"registerFormRef",model:r.registerForm,rules:r.registerRules,class:"register-form","label-position":"left"},{default:o(()=>[e(d,{prop:"username"},{default:o(()=>[e(f,{modelValue:r.registerForm.username,"onUpdate:modelValue":s[0]||(s[0]=n=>r.registerForm.username=n),placeholder:"用户名",type:"text"},{prefix:o(()=>[e(a,null,{default:o(()=>[e(w)]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(d,{prop:"password"},{default:o(()=>[e(f,{modelValue:r.registerForm.password,"onUpdate:modelValue":s[2]||(s[2]=n=>r.registerForm.password=n),placeholder:"密码",type:r.passwordVisible?"text":"password"},{prefix:o(()=>[e(a,null,{default:o(()=>[e(V)]),_:1})]),suffix:o(()=>[e(a,{class:"cursor-pointer",onClick:s[1]||(s[1]=n=>r.passwordVisible=!r.passwordVisible)},{default:o(()=>[r.passwordVisible?(u(),p(m,{key:0})):(u(),p(l,{key:1}))]),_:1})]),_:1},8,["modelValue","type"])]),_:1}),e(d,{prop:"confirmPassword"},{default:o(()=>[e(f,{modelValue:r.registerForm.confirmPassword,"onUpdate:modelValue":s[4]||(s[4]=n=>r.registerForm.confirmPassword=n),placeholder:"确认密码",type:r.confirmPasswordVisible?"text":"password"},{prefix:o(()=>[e(a,null,{default:o(()=>[e(V)]),_:1})]),suffix:o(()=>[e(a,{class:"cursor-pointer",onClick:s[3]||(s[3]=n=>r.confirmPasswordVisible=!r.confirmPasswordVisible)},{default:o(()=>[r.confirmPasswordVisible?(u(),p(m,{key:0})):(u(),p(l,{key:1}))]),_:1})]),_:1},8,["modelValue","type"])]),_:1}),e(d,{prop:"email"},{default:o(()=>[e(f,{modelValue:r.registerForm.email,"onUpdate:modelValue":s[5]||(s[5]=n=>r.registerForm.email=n),placeholder:"邮箱",type:"email"},{prefix:o(()=>[e(a,null,{default:o(()=>[e(i)]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(d,null,{default:o(()=>[e(y,{loading:r.loading,type:"primary",style:{width:"100%"},onClick:r.handleRegister},{default:o(()=>s[7]||(s[7]=[x(" 注册 ")])),_:1},8,["loading","onClick"])]),_:1}),e(d,null,{default:o(()=>[e(P,{type:"primary",onClick:r.toLogin},{default:o(()=>s[8]||(s[8]=[x("已有账号？立即登录")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])]),_:1})])}const D=C(I,[["render",z],["__scopeId","data-v-30d19dd1"]]);export{D as default};
